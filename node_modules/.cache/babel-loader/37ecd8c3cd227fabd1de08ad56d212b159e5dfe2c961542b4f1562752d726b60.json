{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import PostComponent from'./PostComponent';// Make sure the path is correct\nimport'./Forum.css';import{posts}from'../utils';// Import your data\n// Define a function to import images dynamically\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function importAll(r){return r.keys().map(r);}const images=importAll(require.context('../assets',false,/\\.(png|jpe?g|svg)$/));const Section=_ref=>{let{title,children}=_ref;return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),children]});};function Forum(){const[posts,setPosts]=useState([]);const[selectedPost,setSelectedPost]=useState(null);const[recommendedPosts,setRecommendedPosts]=useState([]);// New state for recommended posts\nconst navigate=useNavigate();useEffect(()=>{axios.get('http://localhost:3001/forum/posts').then(response=>{setPosts(response.data);}).catch(error=>console.error('Error fetching posts:',error));},[]);useEffect(()=>{// Randomly select 3 posts from MongoDB\nconst shuffledPosts=posts.sort(()=>0.5-Math.random()).slice(0,3);setRecommendedPosts(shuffledPosts);},[posts]);// Listen for changes in posts\nconst goToPost=postId=>{const post=posts.find(p=>p._id===postId);setSelectedPost(post);};const handleprofile=()=>{navigate('/share');};const handlePostsClick=postId=>{// Redirect to the PostComponent with the selected postId\nnavigate(\"/post/\".concat(postId));};return/*#__PURE__*/_jsxs(\"div\",{className:\"Forum\",children:[/*#__PURE__*/_jsx(Section,{className:\"Forums\",children:/*#__PURE__*/_jsx(\"div\",{className:\"forum-content\"})}),selectedPost?/*#__PURE__*/_jsx(PostComponent,{post:selectedPost}):/*#__PURE__*/_jsx(Section,{title:\"Forum Posts\",children:/*#__PURE__*/_jsx(\"div\",{className:\"posts-list\",children:posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>goToPost(post._id),className:\"post\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"post-title\",children:post.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"post-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"post-author\",children:post.author}),\" |\",' ',/*#__PURE__*/_jsx(\"time\",{className:\"post-date\",children:new Date(post.createdAt).toLocaleDateString()})]})]},post._id))})}),/*#__PURE__*/_jsx(Section,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"story-share\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"story-text1\",children:\"Share your story\"}),/*#__PURE__*/_jsx(\"p\",{className:\"story-text2\",children:\"Do you want to keep track of your journey? Or do you prefer to connect with others who are also new in Finland? Please share your story and experiences here!\"}),/*#__PURE__*/_jsx(\"button\",{className:\"share-story-button\",onClick:handleprofile,children:\"Click here\"})]})})]});}export default Forum;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","PostComponent","posts","jsx","_jsx","jsxs","_jsxs","importAll","r","keys","map","images","require","context","Section","_ref","title","children","Forum","setPosts","selectedPost","setSelectedPost","recommendedPosts","setRecommendedPosts","navigate","get","then","response","data","catch","error","console","shuffledPosts","sort","Math","random","slice","goToPost","postId","post","find","p","_id","handleprofile","handlePostsClick","concat","className","onClick","author","Date","createdAt","toLocaleDateString"],"sources":["/Users/jimena/Downloads/Telegram Desktop/forum/src/Forum/Forum.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport PostComponent from './PostComponent'; // Make sure the path is correct\r\nimport './Forum.css';\r\nimport { posts } from '../utils'; // Import your data\r\n\r\n// Define a function to import images dynamically\r\nfunction importAll(r) {\r\n  return r.keys().map(r);\r\n}\r\n\r\nconst images = importAll(require.context('../assets', false, /\\.(png|jpe?g|svg)$/));\r\n\r\nconst Section = ({ title, children }) => {\r\n  return (\r\n    <section>\r\n      <h2>{title}</h2>\r\n      {children}\r\n    </section>\r\n  );\r\n};\r\n\r\nfunction Forum() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [selectedPost, setSelectedPost] = useState(null);\r\n  const [recommendedPosts, setRecommendedPosts] = useState([]); // New state for recommended posts\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get('http://localhost:3001/forum/posts')\r\n      .then((response) => {\r\n        setPosts(response.data);\r\n      })\r\n      .catch((error) => console.error('Error fetching posts:', error));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Randomly select 3 posts from MongoDB\r\n    const shuffledPosts = posts.sort(() => 0.5 - Math.random()).slice(0, 3);\r\n    setRecommendedPosts(shuffledPosts);\r\n  }, [posts]); // Listen for changes in posts\r\n\r\n  const goToPost = (postId) => {\r\n    const post = posts.find((p) => p._id === postId);\r\n    setSelectedPost(post);\r\n  };\r\n\r\n  const handleprofile = () => {\r\n    navigate('/share');\r\n  };\r\n\r\n  const handlePostsClick = (postId) => {\r\n    // Redirect to the PostComponent with the selected postId\r\n    navigate(`/post/${postId}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"Forum\">\r\n      <Section className=\"Forums\">\r\n        <div className=\"forum-content\">\r\n          {/* your background image */}\r\n        </div>\r\n      </Section>\r\n\r\n      {selectedPost ? (\r\n        <PostComponent post={selectedPost} />\r\n      ) : (\r\n        <Section title=\"Forum Posts\">\r\n          <div className=\"posts-list\">\r\n            {posts.map((post) => (\r\n              <div\r\n                key={post._id}\r\n                onClick={() => goToPost(post._id)}\r\n                className=\"post\"\r\n              >\r\n                <h3 className=\"post-title\">{post.title}</h3>\r\n                <p className=\"post-details\">\r\n                  <span className=\"post-author\">{post.author}</span> |{' '}\r\n                  <time className=\"post-date\">\r\n                    {new Date(post.createdAt).toLocaleDateString()}\r\n                  </time>\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </Section>\r\n      )}\r\n\r\n\r\n\r\n      <Section>\r\n        <div className=\"story-share\">\r\n          <h1 className=\"story-text1\">Share your story</h1>\r\n          <p className=\"story-text2\">\r\n            Do you want to keep track of your journey? Or do you prefer to\r\n            connect with others who are also new in Finland? Please share your\r\n            story and experiences here!\r\n          </p>\r\n          <button className=\"share-story-button\" onClick={handleprofile}>\r\n            Click here\r\n          </button>\r\n        </div>\r\n      </Section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Forum;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAE;AAC7C,MAAO,aAAa,CACpB,OAASC,KAAK,KAAQ,UAAU,CAAE;AAElC;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,QAAS,CAAAC,SAASA,CAACC,CAAC,CAAE,CACpB,MAAO,CAAAA,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,GAAG,CAACF,CAAC,CAAC,CACxB,CAEA,KAAM,CAAAG,MAAM,CAAGJ,SAAS,CAACK,OAAO,CAACC,OAAO,CAAC,WAAW,CAAE,KAAK,CAAE,oBAAoB,CAAC,CAAC,CAEnF,KAAM,CAAAC,OAAO,CAAGC,IAAA,EAAyB,IAAxB,CAAEC,KAAK,CAAEC,QAAS,CAAC,CAAAF,IAAA,CAClC,mBACET,KAAA,YAAAW,QAAA,eACEb,IAAA,OAAAa,QAAA,CAAKD,KAAK,CAAK,CAAC,CACfC,QAAQ,EACF,CAAC,CAEd,CAAC,CAED,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACf,KAAM,CAAChB,KAAK,CAAEiB,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACuB,YAAY,CAAEC,eAAe,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACyB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAAE;AAC9D,KAAM,CAAA2B,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACdC,KAAK,CACF0B,GAAG,CAAC,mCAAmC,CAAC,CACxCC,IAAI,CAAEC,QAAQ,EAAK,CAClBR,QAAQ,CAACQ,QAAQ,CAACC,IAAI,CAAC,CACzB,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAKC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAAC,CACpE,CAAC,CAAE,EAAE,CAAC,CAENhC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAkC,aAAa,CAAG9B,KAAK,CAAC+B,IAAI,CAAC,IAAM,GAAG,CAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CACvEb,mBAAmB,CAACS,aAAa,CAAC,CACpC,CAAC,CAAE,CAAC9B,KAAK,CAAC,CAAC,CAAE;AAEb,KAAM,CAAAmC,QAAQ,CAAIC,MAAM,EAAK,CAC3B,KAAM,CAAAC,IAAI,CAAGrC,KAAK,CAACsC,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKJ,MAAM,CAAC,CAChDjB,eAAe,CAACkB,IAAI,CAAC,CACvB,CAAC,CAED,KAAM,CAAAI,aAAa,CAAGA,CAAA,GAAM,CAC1BnB,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAED,KAAM,CAAAoB,gBAAgB,CAAIN,MAAM,EAAK,CACnC;AACAd,QAAQ,UAAAqB,MAAA,CAAUP,MAAM,CAAE,CAAC,CAC7B,CAAC,CAED,mBACEhC,KAAA,QAAKwC,SAAS,CAAC,OAAO,CAAA7B,QAAA,eACpBb,IAAA,CAACU,OAAO,EAACgC,SAAS,CAAC,QAAQ,CAAA7B,QAAA,cACzBb,IAAA,QAAK0C,SAAS,CAAC,eAAe,CAEzB,CAAC,CACC,CAAC,CAET1B,YAAY,cACXhB,IAAA,CAACH,aAAa,EAACsC,IAAI,CAAEnB,YAAa,CAAE,CAAC,cAErChB,IAAA,CAACU,OAAO,EAACE,KAAK,CAAC,aAAa,CAAAC,QAAA,cAC1Bb,IAAA,QAAK0C,SAAS,CAAC,YAAY,CAAA7B,QAAA,CACxBf,KAAK,CAACQ,GAAG,CAAE6B,IAAI,eACdjC,KAAA,QAEEyC,OAAO,CAAEA,CAAA,GAAMV,QAAQ,CAACE,IAAI,CAACG,GAAG,CAAE,CAClCI,SAAS,CAAC,MAAM,CAAA7B,QAAA,eAEhBb,IAAA,OAAI0C,SAAS,CAAC,YAAY,CAAA7B,QAAA,CAAEsB,IAAI,CAACvB,KAAK,CAAK,CAAC,cAC5CV,KAAA,MAAGwC,SAAS,CAAC,cAAc,CAAA7B,QAAA,eACzBb,IAAA,SAAM0C,SAAS,CAAC,aAAa,CAAA7B,QAAA,CAAEsB,IAAI,CAACS,MAAM,CAAO,CAAC,KAAE,CAAC,GAAG,cACxD5C,IAAA,SAAM0C,SAAS,CAAC,WAAW,CAAA7B,QAAA,CACxB,GAAI,CAAAgC,IAAI,CAACV,IAAI,CAACW,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAC1C,CAAC,EACN,CAAC,GAVCZ,IAAI,CAACG,GAWP,CACN,CAAC,CACC,CAAC,CACC,CACV,cAIDtC,IAAA,CAACU,OAAO,EAAAG,QAAA,cACNX,KAAA,QAAKwC,SAAS,CAAC,aAAa,CAAA7B,QAAA,eAC1Bb,IAAA,OAAI0C,SAAS,CAAC,aAAa,CAAA7B,QAAA,CAAC,kBAAgB,CAAI,CAAC,cACjDb,IAAA,MAAG0C,SAAS,CAAC,aAAa,CAAA7B,QAAA,CAAC,+JAI3B,CAAG,CAAC,cACJb,IAAA,WAAQ0C,SAAS,CAAC,oBAAoB,CAACC,OAAO,CAAEJ,aAAc,CAAA1B,QAAA,CAAC,YAE/D,CAAQ,CAAC,EACN,CAAC,CACC,CAAC,EACP,CAAC,CAEV,CAEA,cAAe,CAAAC,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}